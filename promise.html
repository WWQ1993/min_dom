<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    {   //promise 0
        function ajax() {
            var succ_f = null,
                    fail_f = null,
                    obj = {
                        success: function (callback) {
                            succ_f = callback;
                        },
                        fail: function (callback) {
                            fail_f = callback;
                        }
                    };
            setTimeout(function () {
                var num = Math.random()
                if (num < .5) {

                    succ_f && succ_f();
                }
                else {

                    fail_f && fail_f();
                }
            }, 1000);
            return obj;
        }
        var aj = ajax();
        aj.success(function () {
            console.log('suc')
        });
        aj.fail(function () {
            console.log('fail')
        });
    }


{   //promise
    function Promise(f) {
        var suc_callBack = function () {
                },
                fail_callBack = function () {
                },
                suc=function (e) {
                    suc_callBack(e)
                },
                fail=function (e) {
                    fail_callBack(e);
                }

        this.then = function (f) {
            console.log(f)
            suc_callBack = f;

            return this;
        };
        this.catch = function (f) {
            fail_callBack = f;
            return this;
        }

        f(suc, fail);

    }
    function test(resolve, reject) {
        setTimeout(function () {
            var num = Math.random();
            if (num < .5) {
                console.log(resolve)
                resolve('succ');
            }
            else {
                console.log(reject)
                reject('404');
            }
        }, 1000);
    }


    new Promise(test).then(function (re) {
        console.log(re)
    }).catch(function (e) {
        console.log('siba:' + e)
    })
}


</script>
</body>
</html>